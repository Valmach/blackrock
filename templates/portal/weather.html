{% load smartif %}
{% load portal %}

<script type="text/javascript">

    function timerange(value) {
        jQuery(".weather-image").hide();
        
        var increment = ".twentyfourhours";
        if (value == 1)
            increment = ".sevendays";
        else if (value == 2)
            increment = ".thirtydays";
        return increment;
    }
    
    function getDisplayHour() {
        var now = new Date();
        var hour = now.getHours();
        var ap = "am";
        if (hour   > 11) { ap = "pm";             }
        if (hour   > 12) { hour = hour - 12;      }
        if (hour   == 0) { hour = 12;             }

        return hour + "" + ap;
    }

    function getDisplayDate() {
        var now = new Date();
        var d = now.getDate();
        var day = (d < 10) ? '0' + d : d;
        var m = now.getMonth() + 1;
        var month = (m < 10) ? '0' + m : m;
        var yy = now.getYear();
        
        return month + "/" + day + "/" + now.getFullYear();
    }

    jQuery(document).ready(function() {
        jQuery(".weather-category-selector").click(function() {
            jQuery(".weather-category-selector").removeClass("selected");
            jQuery(this).addClass("selected");

            var category = "." + jQuery(this).attr("id");
            var value = jQuery("#slider").slider( "option", "value" );
            jQuery(category+timerange(value)).show();
        });

        jQuery( "#slider" ).slider({
            max: 2,
            step: 1,
            slide: function( event, ui ) {
                var category = "." + jQuery(".weather-category-selector.selected").attr("id");
                jQuery(category+timerange(ui.value)).show();
            }
        });
        
        jQuery( "#header-copy").html('Conditions as of ' + getDisplayHour() + ' on ' + getDisplayDate());
    });
    

</script>

<h2>Environmental Monitoring Data</h2>
<div id="weather"> 
	<div class="header-row"><h5 id="header-copy"></h5></div>
	<div class="station-id"><h3>Open Lowland Station: Elevation 270 feet</h3></div>
	<div id="weather-viewer">
		<ul>
			<li class="aag">At a Glance</li>
			<li><a class="weather-category-selector selected" id="air-soil">Air and Soil Temperature</a></li>
			<li><a class="weather-category-selector" id="precip">Precipitation</a></li>
			<li><a class="weather-category-selector" id="wind">Wind</a></li>
			<li><a class="weather-category-selector" id="baro">Barometric Pressure</a></li>
		</ul>
        <div id="time-slider">
            <div class="legend">
                <div class="label">24 hours</div>
                <div class="label">&nbsp;7 days</div>
                <div class="label">30 days</div>
            </div>
            <div class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" id="slider">
                <a style="left: 50%;" class="ui-slider-handle ui-state-default ui-corner-all ui-state-focus" href="#"></a>
            </div>
            </div>
        </div>
         	
        <!-- Air Soil -->
		<div class="weather-image air-soil twentyfourhours"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Air-Soil-24Hr.png'></div>
        <div class="weather-image air-soil sevendays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Air-Soil-7Day.png'></div>
        <div class="weather-image air-soil thirtydays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Air-Soil-30Day.png'></div>

        <!-- Precipitation -->
        <div class="weather-image precip twentyfourhours" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Precip-24Hr.png'></div>
        <div class="weather-image precip sevendays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Precip-7Day.png'></div>
        <div class="weather-image precip thirtydays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Precip-30Day.png'></div>
        
        <!-- Wind -->
        <div class="weather-image wind twentyfourhours" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Wind-24Hr.png'></div>
        <div class="weather-image wind sevendays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Wind-7Day.png'></div>
        <div class="weather-image wind thirtydays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Wind-30Day.png'></div>
        
        <!-- Baro -->
        <div class="weather-image baro twentyfourhours" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Baro-24Hr.png'></div>
        <div class="weather-image baro sevendays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Baro-7Day.png'></div>
        <div class="weather-image baro thirtydays" style="display: none"><img src='{% value_from_settings BLACK_ROCK_FEED %}/data/current/Baro-30Day.png'></div>
   </div>
</div>

