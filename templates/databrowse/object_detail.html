{% extends "portal/base_portal.html" %}
{% load smartif %}
{% load portal %}

{% block title %}{{ object.model.verbose_name|capfirst }}: {{ object }}{% endblock %}

{% block container %}
<div class="blocktext">   
    {% with object.instance as current_object %}
    {% with object.instance|klass as asset_klass %}
    {% with 1 as includegeocode %}
    {% with 1 as includehighlight %}
    
    <!-- Asset Locations (Hidden. Used by maps.js to plot GMaps) -->
    {% include "portal/asset_location.html" %}
    
    {% if current_object.display_name %}
        <h2>{{ current_object.display_name }}</h2>
    {% else %}    
        <h2>{{ current_object.name }}</h2>
    {% endif %}
    <h4>Record Type:</h4> {{ current_object|klass_display }}
        
    {% if asset_klass == "DataSet" %}
        
             <h4>Description:</h4>
             {% if current_object.description %}
                {{ current_object.description }}<br />
             {% endif %}
       
            <h4>Collection Start Date:</h4>
            {% if current_object.collection_start_date %}
                {{ current_object.collection_start_date|date }}
            {% endif %}
       
            <h4>Collection End Date:</h4>
            {% if current_object.collection_end_date %}
                {{ current_object.collection_end_date|date }}
            {% endif %}
        
            <h4>Url:</h4>
            {% for u in current_object.url.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="u|detail_url">{{u.name}}</a>{% endfor %}<br />
        
            <h4>Keyword:</h4>
            {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
       
            <h4>Categories:</h4>
            {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
       </div>
       
            {% if current_object.location %}
               {% if current_object.location.station_set.count %}
                  <h4>Station:</h4>
                  <a href="{{current_object.location.station_set.all.0|detail_url}}">{{ current_object.location.station_set.all.0.name }}</a>
               {% else %}
                  <h4>Location:</h4>
                  <a href="{{current_object.location|detail_url}}">{{ current_object.location.name }}</a>
               {% endif %}
            {% else %}
                <h4>Location:</h4> <!-- Show attribute label with no data -->
            {% endif %}
        
            <h4>People:</h4>
            {% for p in current_object.person.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{p|detail_url}}">{{p.name}}</a>{% endfor %}<br />
        </div>
    {% else %}{% if asset_klass == "DigitalObject" %}
       
             <h4>Description:</h4>
             {% if current_object.description %}
                {{ current_object.description }}<br />
             {% endif %}
        
            <h4>Format:</h4>
            {% if current_object.digital_format %}
                {{ current_object.digital_format }}<br />
             {% endif %}
         
            <h4>Download link:</h4>
            {% if current_object.url %}
                <a href="{{current_object.url}}">{{current_object.url}}</a>
            {% endif %}
        
            <h4>Keyword:</h4>
            {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
        
            <h4>Categories:</h4>
            {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
        
            <h4>Source:</h4>
            {% if current_object.source %}
                {{ current_object.source }}
            {% endif %}
        
       </div>
    {% else %}{% if asset_klass == "LearningActivity" %}
       
            <h4>Format:</h4> 
            {% if current_object.digital_format.count %}
                {% for f in current_object.digital_format.all %}{% if forloop.counter > 1 %}, {% endif %}{{ f.name }}{% endfor %}<br />
            {% endif %}
         
              <h4>Authors:</h4>
              {% for x in current_object.author.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{x|detail_url}}">{{x.name}}</a>{% endfor %}<br />
          
              <h4>Description:</h4>
              {% if current_object.description %}
                 {{ current_object.description }}<br />
              {% endif %}
         
              <h4>Url:</h4>
              {% for u in current_object.url.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{u.name}}">{{ u.name }}</a>{% endfor %}<br />
          
              <h4>Keyword:</h4>
              {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
         
              <h4>Categories:</h4>
              {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
          
              <h4>Location:</h4>
              {% if current_object.location %}
                 <a href="{{current_object.location|detail_url}}">{{ current_object.location.name }}</a>
              {% endif %}
          </div>
          
          {% if current_object.dataset.count %}
          </div><div class="blocktext">
             <h4>Related DataSets:</h4>
             <ul class="related_assetlist">
             {% for x in current_object.dataset.all %}
                 {% with x as current_object %}
                 {% with 1 as includegeocode %}
                 {% with 1 as includehighlight %}
                 {% with "mapicon_related.png" as iconname %}
                 
                    <!-- Asset Locations (Hidden. Used by maps.js to plot GMaps) -->
                    {% include "portal/asset_location.html" %}
             
                    <li class="related_asset"><a href="{{x|detail_url}}">{{x.name}}</a></li>
                  {% endwith %}{% endwith %}{% endwith %}{% endwith %}
             {% endfor %}
             </ul>
          </div>
          {% endif %}
          
          {% if current_object.digitalobject.count %}
          <div>
             <h4>Related Digital Objects:</h4>
             <ul class="related_assetlist">
             {% for x in current_object.digitalobject.all %}
                <li class="related_asset"><a href="{{x|detail_url}}">{{x.name}}</a></li>
             {% endfor %}
             </ul>
          </div>
          {% endif %}
          
          {% if current_object.person.count %}
          </div>
          
          <div class="blocktext">
             <h4>Related People:</h4>
             <ul class="related_assetlist">
             
             {% for x in current_object.person.all %}
                <li class="related_asset"><a href="{{x|detail_url}}">{{x.name}}</a>{% endfor %}</li>
             </ul>
          </div>
          {% endif %}
       </div>
    {% else %}{% if asset_klass == "Location" %}
        <div>
            <h4>Location Type:</h4> 
            {% if current_object.location_type.count %}
                {% for t in current_object.location_type.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}
            {% endif %}
        </div>
        <div>
            <h4>Location Subtype:</h4>
            {% if current_object.location_subtype.count %}
                 {% for t in current_object.location_subtype.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
            {% endif %}
        </div>
        <h4>Latitude:</h4> {{current_object.latitude}}</div>
        <h4>Longitude:</h4> {{current_object.longitude}}</div>
        <div>
            <h4>Keyword:</h4>
            {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
        </div>
        <div>
            <h4>Categories:</h4>
            {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
        </div>
    {% else %}{% if asset_klass == "Person" %}
        <div>
            <h4>Title:</h4> 
            {% if current_object.professional_title %}
                {{ current_object.professional_title }}
            {% endif %}
        </div>
        <div>
            <h4>Institution:</h4>
            {% if current_object.institution %}
                 {% for i in current_object.institution.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{i|detail_url}}">{{ i.name }}</a>{% endfor %}
            {% endif %}
         </div>
         <div>
             <h4>Biography:</h4>
             {% if current_object.description %}
                 {{ current_object.description }}<br />
             {% endif %}
         </div>
         <div>
             <h4>Url:</h4>
             {% for u in current_object.url.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="u|detail_url">{{u.name}}</a>{% endfor %}<br />
         </div>
         <div>
             <h4>Keyword:</h4>
             {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
         </div>
         <div>
             <h4>Categories:</h4>
             {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
         </div>
         <div>
            <h4>Roles:</h4>
            {% for t in current_object.person_type.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
         </div>
    {% else %}{% if asset_klass == "Publication" %}
           <div>
              <h4>Publication Type:</h4> 
              {% if current_object.publication_type.count %}
                 {% for t in current_object.publication_type.all %}{% if forloop.counter > 1 %}, {% endif %}{{ t.name }}{% endfor %}<br />
              {% endif %}
          </div>
          <div>
            <h4>Publication Date:</h4>
            {% if current_object.publication_date %}
                {{ current_object.publication_date|date }}
            {% endif %}
          </div>
          <div>
              <h4>Citation:</h4>
              {% if current_object.citation %}
                 {{ current_object.citation }}<br />
              {% endif %}
          </div>
          <div>
              <h4>Description:</h4>
              {% if current_object.description %}
                 {{ current_object.description }}<br />
              {% endif %}
          </div>
         <div>
             <h4>Url:</h4>
             {% for u in current_object.url.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="u|detail_url">{{u.name}}</a>{% endfor %}<br />
         </div>
         <div>
             <h4>DOI:</h4>
             {% if current_object.doi_citation %}
                {{ current_object.doi_citation }}
             {% endif %}
         </div>
         <div>
             <h4>Keyword:</h4>
             {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
         </div>
         <div>
             <h4>Categories:</h4>
             {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
         </div>
         <div>
            <h4>Rights:</h4>
            {% for r in current_object.rights.all %}{% if forloop.counter > 1 %}, {% endif %}{{ r.name }}{% endfor %}<br />
         </div>
         {% if current_object.person.count %}
            <br /><br />
            </div><div class="blocktext">
                <h4>Related People:</h4>
                <ul class="related_assetlist">
                    {% for x in current_object.person.all %}
                        <li class="related_asset"><a href="{{x|detail_url}}">{{x.name}}</a></li>
                    {% endfor %}
                </ul>
            </div>
         {% endif %} 
    {% else %}{% if asset_klass == "Region" %}
        <div>
           <h4>Type:</h4> 
           {% if current_object.region_type.count %}
              {% for t in current_object.region_type.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
           {% endif %}
        </div>
        <div>
            <h4>Description:</h4> 
            {% if current_object.description %}
                {{ current_object.description }}<br />
            {% endif %}
        </div>
        <div>
            <h4>Keyword:</h4>
            {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
        </div>
        <div>
            <h4>Categories:</h4>
            {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
        </div>
        <br />
        <br />
        </div><div class="blocktext">
            <h4>Related Locations:</h4>
            <ul class="related_assetlist">
                {% for x in current_object.location.all %}
                     {% with x as current_object %}
                     {% with 1 as includegeocode %}
                     {% with 1 as includehighlight %}
                     {% with "mapicon_related.png" as iconname %}
                        <!-- Asset Locations (Hidden. Used by maps.js to plot GMaps) -->
                        {% include "portal/asset_location.html" %}
                    {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                    
                    <li class="related_asset"><a href="{{x|detail_url}}">{{ x.name }}</a></li>
                {% endfor %}
            </ul>
        </div>
        
    {% else %}{% if asset_klass == "ResearchProject" %}
        <div>
            <h4>Project Start Date:</h4>
            {% if current_object.start_date %}
                {{ current_object.start_date|date }}
            {% endif %} 
        </div>
        <div>
            <h4>Project End Date:</h4>
            {% if current_object.end_date %}
                {{ current_object.end_date|date }}
            {% endif %} 
        </div>
        <div>
           <h4>Principal Investigator{% if current_object.person.count > 1 %}s{% endif %}:</h4>
           {% if current_object.person.count %}
              {% for p in current_object.person.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{p|detail_url}}"/>{{ p.name }}</a>{% endfor %}<br />
           {% endif %}
        </div>
        <div>
           <h4>Description:</h4> 
           {% if current_object.description %}
              {{ current_object.description }}<br />
           {% endif %}
        </div>
        <div>
            {% if current_object.location %}
               {% if current_object.location.station_set.count %}
                  <h4>Station:</h4>
                  <a href="{{current_object.location.station_set.all.0|detail_url}}">{{ current_object.location.station_set.all.0.name }}</a>
               {% else %}
                  <h4>Location:</h4>
                  <a href="{{current_object.location|detail_url}}">{{ current_object.location.name }}</a>
               {% endif %}
            {% else %}
                <h4>Location:</h4> <!-- Show attribute label with no data -->
            {% endif %}
        </div>
        <div>
             <h4>Keyword:</h4>
             {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
        </div>
        <div>
             <h4>Categories:</h4>
             {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
         </div>
       <br /><br />
       </div><div class="blocktext">
           {% if current_object.dataset.count %}
              <h4>Related DataSets:</h4>
              <ul class="related_assetlist">
              {% for d in current_object.dataset.all %}
                 {% with d as current_object %}
                 {% with 1 as includegeocode %}
                 {% with 1 as includehighlight %}
                 {% with "mapicon_related.png" as iconname %}
                    <!-- Asset Locations (Hidden. Used by maps.js to plot GMaps) -->
                    {% include "portal/asset_location.html" %}
                {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                <li class="related_asset"><a href="{{d|detail_url}}">{{ d.name }}</a></li>
              {% endfor %}
              </ul>
           {% endif %}
       </div>
       </div><div class="blocktext">
           {% if current_object.publication.count %}
              <h4>Related Publications:</h4>
              <ul class="related_assetlist">
              {% for p in current_object.publication.all %}
                <li class="related_asset"><a href="{{p|detail_url}}">{{ p.name }}</a></li>
              {% endfor %}
              </ul>
           {% endif %}
       </div>
   {% else %}{% if asset_klass == "Station" %}
       <div>
          <h4>Activation Date:</h4>
          {% if current_object.activation_date %}
             {{ current_object.activation_date|date }}
          {% endif %}
       </div>
       <div>
           <h4>Location:</h4>
           {% if current_object.location %}
              <a href="{{current_object.location|detail_url}}">{{ current_object.location.name }}</a>
           {% endif %}
       </div>
      <div>
         <h4>Description:</h4> 
         {% if current_object.description %}
            {{ current_object.description }}<br />
         {% endif %}
      </div>
      <div>
         <h4>Keyword:</h4>
         {% for f in current_object.facet.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{f|detail_url}}">{{ f.display_name }}</a>{% endfor %}<br />
      </div>
      <div>
         <h4>Categories:</h4>
         {% for t in current_object.tag.all %}{% if forloop.counter > 1 %}, {% endif %}<a href="{{t|detail_url}}">{{ t.name }}</a>{% endfor %}<br />
      </div>
      
        {% if current_object.research_projects|length %}
            
            </div><div class="blocktext">
            <h4>Related Research Projects:</h4>
            <ul class="related_assetlist">
            {% for x in current_object.research_projects %}
                {% with x as current_object %}
                {% with 1 as includegeocode %}
                {% with 1 as includehighlight %}
                {% with "mapicon_related.png" as iconname %}
                    <!-- Asset Locations (Hidden. Used by maps.js to plot GMaps) -->
                    {% include "portal/asset_location.html" %}
                {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                <li class="related_asset"><a href="{{x|detail_url}}">{{ x.name }}</a></li>
            {% endfor %}
            </div>
            </ul>
        {% endif %}
        {% if current_object.datasets|length %}
            <div>
            <h4>Related DataSets:</h4>
            <ul class="related_assetlist">
            {% for x in current_object.datasets %}
                {% with x as current_object %}
                {% with 1 as includegeocode %}
                {% with 1 as includehighlight %}
                {% with "mapicon_related.png" as iconname %}
                    <!-- Asset Locations (Hidden. Used by maps.js to plot GMaps) -->
                    {% include "portal/asset_location.html" %}
                {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                <li class="related_asset"><a href="{{x|detail_url}}">{{ x.name }}</a></li>
            {% endfor %}
            </ul>
            </div>
        {% endif %}            
   {% else %}{% if asset_klass == "ForestStory" %}
       {% if current_object.display_image %}
          <img alt="Forest Story Icon" src="{{current_object.display_image.file.url}}" class="featured_image"></img>
       {% else %}
          <img alt="Forest Story Icon" src="/portal/media/images/foreststory.png"></img>
       {% endif %}
      <div>
         <h4>Description:</h4> 
         {% if current_object.description %}
            {{ current_object.description }}<br />
         {% endif %}
      </div>      
    {% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}{% endif %}
    
    {% for related_object in object.related_objects %}
   <div class="blocktext related">
      {% if related_object.object_list %}
          <br />
          <h4>Related {{ related_object.model.verbose_name_plural|capfirst }}</h4>
          <ul class="related_assetlist">
            {% for object in related_object.object_list %}
                {% with object.instance as current_object %}
                {% with 1 as includegeocode %}
                {% with 1 as includehighlight %}
                {% with "mapicon_related.png" as iconname %}
                    {% include "portal/asset_location.html" %}
                {% endwith %}{% endwith %}{% endwith %}{% endwith %}
                
                <li class="related_asset"><a href="{{ object.instance|detail_url }}">{% if object.instance.display_name %}{{object.instance.display_name}}{% else %}{{object.instance.name}}{%endif%}</a></li>
            {% endfor %}
          </ul></div>
      {% endif %}
      </div>
   {% endfor %}

   {% include "portal/asset_map.html" %}
    
{% endwith %}{% endwith %}{% endwith %}{% endwith %}
{% endblock %}

{% block featured %}
{% endblock %}
